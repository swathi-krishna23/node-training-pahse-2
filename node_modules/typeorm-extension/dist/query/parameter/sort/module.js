"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.applySort = exports.applyQuerySort = exports.applyQuerySortParseOutput = void 0;
var query_1 = require("@trapi/query");
// --------------------------------------------------
/**
 * Apply parsed sort parameter data on the db query.
 *
 * @param query
 * @param data
 */
function applyQuerySortParseOutput(query, data) {
    if (data.length === 0) {
        return data;
    }
    var sort = {};
    for (var i = 0; i < data.length; i++) {
        var prefix = data[i].alias ? "".concat(data[i].alias, ".") : '';
        var key = "".concat(prefix).concat(data[i].key);
        sort[key] = data[i].value;
    }
    query.orderBy(sort);
    return data;
}
exports.applyQuerySortParseOutput = applyQuerySortParseOutput;
/**
 * Apply raw sort parameter data on the db query.
 *
 * @param query
 * @param data
 * @param options
 */
function applyQuerySort(query, data, options) {
    return applyQuerySortParseOutput(query, (0, query_1.parseQuerySort)(data, options));
}
exports.applyQuerySort = applyQuerySort;
/**
 * Apply raw sort parameter data on the db query.
 *
 * @param query
 * @param data
 * @param options
 */
function applySort(query, data, options) {
    return applyQuerySortParseOutput(query, (0, query_1.parseQuerySort)(data, options));
}
exports.applySort = applySort;
//# sourceMappingURL=module.js.map